<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="header-title">
      {{ dataText.getText('prices') }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding prices-page prices-container">

  <!-- Seleção de Tabelas -->
  <!-- <ion-card class="prices-container">
    <ion-title class="table-title">
      {{ dataText.getText('selectTable') }}
    </ion-title>
    <ion-item>
      <ion-label>{{ dataText.getText('priceTable') }}</ion-label>
      <ion-select placeholder="{{ dataText.getText('selectOption') }}" (ionChange)="onTableChange($event)">
        <ion-select-option *ngFor="let table of priceTables" [value]="table">
          {{ table?.name }} - {{ table?.region }}
        </ion-select-option>
      </ion-select>
    </ion-item>
  </ion-card> -->

  <!-- Detalhes do Cálculo -->
  <ion-card *ngIf="calculatedPrice" class="prices-container">
    <ion-card-header>
      <ion-title>{{ dataText.getText('calculationDetails') }}</ion-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-label>{{ dataText.getText('totalDistance') }}</ion-label>
          <ion-note slot="end">{{ totalDistance }} km</ion-note>
        </ion-item>
        <ion-item>
          <ion-label>{{ dataText.getText('totalTime') }}</ion-label>
          <ion-note slot="end">{{ totalTime }} min</ion-note>
        </ion-item>
        <!--<ion-item>
          <ion-label>{{ dataText.getText('systemFee') }}</ion-label>
            <ion-note slot="end">R$ {{ calculatedPrice.systemFee }}</ion-note>
        </ion-item>
        <ion-item>
          <ion-label>{{ dataText.getText('fixedFee') }}</ion-label>
            <ion-note slot="end">R$ {{ calculatedPrice.fixedFee }}</ion-note>
        </ion-item> -->
        <ion-item>
          <ion-label>{{ dataText.getText('finalPrice') }}</ion-label>
            <ion-note slot="end" *ngIf="calculatedPrice && calculatedPrice.price">R$ {{ calculatedPrice.price }}</ion-note>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Explicação do Cálculo -->
  <ion-card class="prices-container explanation-card">
    <ion-card-content>
      <p>
        <strong>{{ dataText.getText('explanation') }}</strong><br>
        {{ selectedTable?.name }}: O cálculo foi baseado na distância total de 
        {{ totalDistance }} km, com {{ dropPoints.length }} pontos no trajeto e 
        um tempo estimado de {{ totalTime }} minutos.
      </p>
    </ion-card-content>
  </ion-card>

</ion-content>

<ion-footer class="footer-buttons">
  <div class="background-overlay"></div>
  <ion-button expand="block" color="success" (click)="confirmPrices()">
    <ion-icon slot="start" name="checkmark-outline"></ion-icon>
    {{ dataText.getText('confirm') }}
  </ion-button>
</ion-footer>
